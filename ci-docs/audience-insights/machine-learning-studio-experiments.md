---
title: Experimenty v Machine Learning Studio (classic)
description: Použití modelů Machine Learning Studio (classic) v Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: ameetj
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 71881f7e1f9448fe0a7d6d92b8102b8b42de7c2a
ms.sourcegitcommit: bae40184312ab27b95c140a044875c2daea37951
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/15/2021
ms.locfileid: "5598331"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="04302-103">Použití modelů založených na Azure Machine Learning Studio (classic)</span><span class="sxs-lookup"><span data-stu-id="04302-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="04302-104">Sjednocená data v Dynamics 365 Customer Insights jsou zdrojem pro vytváření modelů strojového učení, které mohou generovat další obchodní poznatky.</span><span class="sxs-lookup"><span data-stu-id="04302-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="04302-105">Customer Insights se integruje s řešeními Machine Learning Studio (classic), abyste mohli používat své vlastní modely.</span><span class="sxs-lookup"><span data-stu-id="04302-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="04302-106">Chcete-li vědět, jak modely vyvinuté v Azure Machine Learning jsou integrovány s Customer Insights, viz [Experimenty v Azure Machine Learning](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="04302-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="04302-107">Požadavky</span><span class="sxs-lookup"><span data-stu-id="04302-107">Prerequisites</span></span>

- <span data-ttu-id="04302-108">Přístup k Customer Insights</span><span class="sxs-lookup"><span data-stu-id="04302-108">Access to Customer Insights</span></span>
- <span data-ttu-id="04302-109">Aktivní předplatné Azure Enterprise</span><span class="sxs-lookup"><span data-stu-id="04302-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="04302-110">Sjednocené profily zákazníka</span><span class="sxs-lookup"><span data-stu-id="04302-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="04302-111">Nastavený [export entity do úložiště Azure Blob](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="04302-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="04302-112">Nastavení řešení Machine Learning Studio Classic</span><span class="sxs-lookup"><span data-stu-id="04302-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="04302-113">V prvním kroku musíme vytvořit pracovní prostor a otevřít Machine Learning Studio (classic).</span><span class="sxs-lookup"><span data-stu-id="04302-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="04302-114">Předěte na [https://www.portal.azure.com](https://www.portal.azure.com/) a přihlaste se.</span><span class="sxs-lookup"><span data-stu-id="04302-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="04302-115">Vyberte **Vytvořit prostředek**.</span><span class="sxs-lookup"><span data-stu-id="04302-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="04302-116">Vyhledejte **Pracovní prostor Machine Learning Studio** a vyberte **Vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="04302-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="04302-117">Zadejte požadované údaje pro [vytvoření pracovního prostoru](/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="04302-117">Enter the required details to [create the workspace](/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="04302-118">Zvolte **Cenová úroveň plánu webové služby** na základě množství dat, které plánujete importovat.</span><span class="sxs-lookup"><span data-stu-id="04302-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="04302-119">Pro nejlepší výkon vyberte **Umístění**, které je pro vás geograficky nejbližší.</span><span class="sxs-lookup"><span data-stu-id="04302-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="04302-120">Po vytvoření prostředku se zobrazí řídicí panel pracovního prostoru Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="04302-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="04302-121">Vyberte **Spustit Machine Learning Studio**.</span><span class="sxs-lookup"><span data-stu-id="04302-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Uživatelské rozhraní Azure Machine Learning Studio](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="04302-123">Práce s Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="04302-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="04302-124">Nyní můžete vytvořit nový experiment nebo importovat existující šablonu experimentu z ukázkové galerie.</span><span class="sxs-lookup"><span data-stu-id="04302-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="04302-125">Existují ukázkové experimenty pro tři standardní scénáře:</span><span class="sxs-lookup"><span data-stu-id="04302-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="04302-126">Predikce úbytku</span><span class="sxs-lookup"><span data-stu-id="04302-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="04302-127">Hodnota životnosti zákazníka</span><span class="sxs-lookup"><span data-stu-id="04302-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="04302-128">Doporučení produktu nebo další nejlepší akce</span><span class="sxs-lookup"><span data-stu-id="04302-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="04302-129">Pokud vytvoříte nový experiment nebo použijete šablonu experimentu z galerie, musíte nakonfigurovat vlastnosti **Importovat data**.</span><span class="sxs-lookup"><span data-stu-id="04302-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="04302-130">V průvodci nebo přímo zadejte podrobnosti pro přístup k úložišti Azure Blob Storage, které obsahuje vaše data.</span><span class="sxs-lookup"><span data-stu-id="04302-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Experiment Azure Machine Learning Studio](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="04302-132">Nyní můžete sestavit vlastní procesní kanál pro čištění a předzpracování dat, extrahování funkcí a trénování vhodného modelu.</span><span class="sxs-lookup"><span data-stu-id="04302-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="04302-133">Otestujte a optimalizujte výkon modelu.</span><span class="sxs-lookup"><span data-stu-id="04302-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="04302-134">Pokud jste spokojeni s kvalitou modelu, vyberte **Nastavit webovou službu** > **Prediktivní webová služba**.</span><span class="sxs-lookup"><span data-stu-id="04302-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="04302-135">Tato možnost importuje trénovaný model a kanál pro vytváření funkcí z výukového experimentu do prediktivní služby.</span><span class="sxs-lookup"><span data-stu-id="04302-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="04302-136">Prediktivní služba může vzít další sadu vstupních dat se schématem použitým ve výukovém experimentu k vytváření predikcí.</span><span class="sxs-lookup"><span data-stu-id="04302-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Nastavení prediktivní webové služby](media/predictive-webservice-control.png)

1. <span data-ttu-id="04302-138">Jakmile je experiment prediktivní webové služby úspěšný, můžete jej nasadit pro automatické plánování.</span><span class="sxs-lookup"><span data-stu-id="04302-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="04302-139">Chcete-li, aby webová služba fungovala s Customer Insights, zvolte **Nasadit webovou službu** > **Nasadit webovou službu [nová] Preview**.</span><span class="sxs-lookup"><span data-stu-id="04302-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="04302-140">[Další informace o nasazení webové služby](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="04302-140">[Learn more about deploying a web service](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Nasazení prediktivní webové služby](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="04302-142">Ukázkové modely z galerie</span><span class="sxs-lookup"><span data-stu-id="04302-142">Sample models from the gallery</span></span>

<span data-ttu-id="04302-143">Pro modely v tomto článku použijeme fiktivní scénář Contoso Hotel.</span><span class="sxs-lookup"><span data-stu-id="04302-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="04302-144">Contoso Hotel shromažďuje následující data:</span><span class="sxs-lookup"><span data-stu-id="04302-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="04302-145">Data CRM sestávající z aktivity hotelového pobytu.</span><span class="sxs-lookup"><span data-stu-id="04302-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="04302-146">Datová sada obsahuje informace o datech pobytu každého registrovaného zákazníka.</span><span class="sxs-lookup"><span data-stu-id="04302-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="04302-147">Obsahuje také informace o rezervaci, typech pokojů, podrobnosti o výdajích atd.</span><span class="sxs-lookup"><span data-stu-id="04302-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="04302-148">Data pokrývají čtyři roky, od ledna 2014 do ledna 2018.</span><span class="sxs-lookup"><span data-stu-id="04302-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="04302-149">Profily zákazníků hotelových hostů.</span><span class="sxs-lookup"><span data-stu-id="04302-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="04302-150">Tyto profily obsahují informace o každém zákazníkovi, včetně jeho jména, data narození, poštovní adresy, pohlaví a telefonního čísla.</span><span class="sxs-lookup"><span data-stu-id="04302-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="04302-151">Využití služeb nabízených hotelem, jako jsou lázně, prádelna, WiFi nebo kurýr.</span><span class="sxs-lookup"><span data-stu-id="04302-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="04302-152">Tyto informace se zaznamenávají pro každého registrovaného zákazníka.</span><span class="sxs-lookup"><span data-stu-id="04302-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="04302-153">Obvykle je využívání služeb spojeno s pobytem.</span><span class="sxs-lookup"><span data-stu-id="04302-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="04302-154">V některých případech mohou služby využívat zákazníci, aniž by zůstali v hotelu.</span><span class="sxs-lookup"><span data-stu-id="04302-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="04302-155">Analýza úbytku</span><span class="sxs-lookup"><span data-stu-id="04302-155">Churn Analysis</span></span>

<span data-ttu-id="04302-156">Analýza úbytku se vztahuje na různé oblasti podnikání.</span><span class="sxs-lookup"><span data-stu-id="04302-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="04302-157">V tomto příkladu se podíváme na úbytek služeb, konkrétně v souvislosti s hotelovými službami, jak je popsáno výše.</span><span class="sxs-lookup"><span data-stu-id="04302-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="04302-158">Poskytuje funkční příklad kompletního kanálu modelu, který může být použit jako výchozí bod pro jakýkoli jiný typ modelu úbytku.</span><span class="sxs-lookup"><span data-stu-id="04302-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="04302-159">Definice úbytku</span><span class="sxs-lookup"><span data-stu-id="04302-159">Definition of Churn</span></span>

<span data-ttu-id="04302-160">Definice úbytku se může lišit podle scénáře.</span><span class="sxs-lookup"><span data-stu-id="04302-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="04302-161">V tomto příkladu by měl být host, který v minulém roce nenavštívil hotel, označen jako odchozí.</span><span class="sxs-lookup"><span data-stu-id="04302-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="04302-162">Šablonu experimentu lze importovat z galerie.</span><span class="sxs-lookup"><span data-stu-id="04302-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="04302-163">Nejprve se ujistěte, že importujete data pro **Aktivita hotelového pobytu** (Hotel Stay Activity), **Zákaznická data** (Customer Data) a **Data využití služby** (Service Usage Data) z úložiště Azure Blob.</span><span class="sxs-lookup"><span data-stu-id="04302-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Import dat pro model úbytku](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="04302-165">Vytváření funkcí</span><span class="sxs-lookup"><span data-stu-id="04302-165">Featurization</span></span>

<span data-ttu-id="04302-166">Na základě definice úbytku nejprve identifikujeme nezpracované funkce, které ovlivní popisek.</span><span class="sxs-lookup"><span data-stu-id="04302-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="04302-167">Poté tyto nezpracované funkce zpracujeme na číselné funkce, které lze použít s modely strojového učení.</span><span class="sxs-lookup"><span data-stu-id="04302-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="04302-168">K integraci dat dochází v Customer Insights, abychom se k těmto tabulkám mohli připojit pomocí *ID zákazníka*.</span><span class="sxs-lookup"><span data-stu-id="04302-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Spojení importovaných dat](media/join-imported-data.png)

<span data-ttu-id="04302-170">Vytváření funkcí pro sestavení modelu analýzy odlivu zákazníků může být trochu složitější.</span><span class="sxs-lookup"><span data-stu-id="04302-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="04302-171">Data jsou funkcí času, kdy se denně zaznamenává nová hotelová aktivita.</span><span class="sxs-lookup"><span data-stu-id="04302-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="04302-172">Během vytváření funkcí chceme generovat statické funkce z dynamických dat.</span><span class="sxs-lookup"><span data-stu-id="04302-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="04302-173">V tomto případě generujeme několik funkcí z hotelové aktivity s posuvným oknem po dobu jednoho roku.</span><span class="sxs-lookup"><span data-stu-id="04302-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="04302-174">Rovněž rozšiřujeme kategorické funkce, jako je typ pokoje nebo typ rezervace, na samostatné funkce pomocí kódování nul a jedniček.</span><span class="sxs-lookup"><span data-stu-id="04302-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="04302-175">Končený seznam funkcí:</span><span class="sxs-lookup"><span data-stu-id="04302-175">Final list of features:</span></span>

| <span data-ttu-id="04302-176">**Počet**</span><span class="sxs-lookup"><span data-stu-id="04302-176">**Number**</span></span>  | <span data-ttu-id="04302-177">**Původní sloupec**</span><span class="sxs-lookup"><span data-stu-id="04302-177">**Original_Column**</span></span>          | <span data-ttu-id="04302-178">**Odvozené funkce**</span><span class="sxs-lookup"><span data-stu-id="04302-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="04302-179">1</span><span class="sxs-lookup"><span data-stu-id="04302-179">1</span></span>           | <span data-ttu-id="04302-180">Room Type (typ pokoje)</span><span class="sxs-lookup"><span data-stu-id="04302-180">Room Type</span></span>                    | <span data-ttu-id="04302-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="04302-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="04302-182">2</span><span class="sxs-lookup"><span data-stu-id="04302-182">2</span></span>           | <span data-ttu-id="04302-183">Typ rezervace</span><span class="sxs-lookup"><span data-stu-id="04302-183">Booking Type</span></span>                 | <span data-ttu-id="04302-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="04302-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="04302-185">3</span><span class="sxs-lookup"><span data-stu-id="04302-185">3</span></span>           | <span data-ttu-id="04302-186">Travel Category (kategorie cestování)</span><span class="sxs-lookup"><span data-stu-id="04302-186">Travel Category</span></span>              | <span data-ttu-id="04302-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="04302-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="04302-188">4</span><span class="sxs-lookup"><span data-stu-id="04302-188">4</span></span>           | <span data-ttu-id="04302-189">Dollars Spent (utracené dolary)</span><span class="sxs-lookup"><span data-stu-id="04302-189">Dollars Spent</span></span>                | <span data-ttu-id="04302-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="04302-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="04302-191">5</span><span class="sxs-lookup"><span data-stu-id="04302-191">5</span></span>           | <span data-ttu-id="04302-192">Check-in and Checkout dates (datum přihlášení a odhlášení)</span><span class="sxs-lookup"><span data-stu-id="04302-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="04302-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="04302-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="04302-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="04302-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="04302-195">6</span><span class="sxs-lookup"><span data-stu-id="04302-195">6</span></span>           | <span data-ttu-id="04302-196">Service Usage (využití služby)</span><span class="sxs-lookup"><span data-stu-id="04302-196">Service Usage</span></span>                | <span data-ttu-id="04302-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="04302-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="04302-198">Výběr modelu</span><span class="sxs-lookup"><span data-stu-id="04302-198">Model selection</span></span>

<span data-ttu-id="04302-199">Nyní musíme zvolit optimální algoritmus, který se má použít.</span><span class="sxs-lookup"><span data-stu-id="04302-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="04302-200">V tomto případě je většina funkcí založena na kategorických prvcích.</span><span class="sxs-lookup"><span data-stu-id="04302-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="04302-201">Typicky dobře fungují modely založené na rozhodovacích stromech.</span><span class="sxs-lookup"><span data-stu-id="04302-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="04302-202">Pokud existují pouze numerické funkce, mohla by být lepší volba neuronové sítě.</span><span class="sxs-lookup"><span data-stu-id="04302-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="04302-203">V takových situacích je také dobrým kandidátem metoda podpůrných vektorů (SVM); k získání nejlepšího výkonu však potřebuje trochu vyladění.</span><span class="sxs-lookup"><span data-stu-id="04302-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="04302-204">Zvolíme si **Zesílený rozhodovací strom se dvěma třídami** jako první zvolený model následovaný **SVM se dvěma třídami** jako druhý model.</span><span class="sxs-lookup"><span data-stu-id="04302-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="04302-205">Azure Machine Learning Studio vám umožňuje provádět A/B testování, takže je výhodné začít se dvěma modely, nikoli s jedním.</span><span class="sxs-lookup"><span data-stu-id="04302-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="04302-206">Následující obrázek ukazuje cvičení modelu a kanál vyhodnocení v Azure Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="04302-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Model úbytku v Azure Machine Learning Studio](media/azure-machine-learning-model.png)

<span data-ttu-id="04302-208">Také používáme techniku zvanou **Důležitost funkce permutace**, což je důležitý aspekt optimalizace modelu.</span><span class="sxs-lookup"><span data-stu-id="04302-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="04302-209">Integrované modely mají malý až žádný přehled o dopadu na jakékoli konkrétní funkce konečné predikce.</span><span class="sxs-lookup"><span data-stu-id="04302-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="04302-210">Kalkulačka důležitosti funkce používá vlastní algoritmus pro výpočet vlivu jednotlivých prvků na výsledek konkrétního modelu.</span><span class="sxs-lookup"><span data-stu-id="04302-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="04302-211">Důležitost funkce je normalizována mezi +1 a -1.</span><span class="sxs-lookup"><span data-stu-id="04302-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="04302-212">Negativní vliv znamená, že odpovídající funkce má kontraintuitivní vliv na výsledek a měla by být z modelu odstraněna.</span><span class="sxs-lookup"><span data-stu-id="04302-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="04302-213">Pozitivní vliv naznačuje, že funkce výrazně přispívá k predikci.</span><span class="sxs-lookup"><span data-stu-id="04302-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="04302-214">Tyto hodnoty nejsou korelačními koeficienty, protože se jedná o odlišné metriky.</span><span class="sxs-lookup"><span data-stu-id="04302-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="04302-215">Další informace viz [Důležitost funkce permutace](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="04302-215">For more information, see [Permutation Feature Importance](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="04302-216">Celý [experiment úbytku je k dispozici v Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="04302-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="04302-217">Predikce hodnoty životnosti zákazníka</span><span class="sxs-lookup"><span data-stu-id="04302-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="04302-218">Výpočet hodnoty životnosti zákazníka (CLTV) je jednou z klíčových metrik, které může firma použít k hodnocení a segmentaci svých zákazníků.</span><span class="sxs-lookup"><span data-stu-id="04302-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="04302-219">Pro hotelnictví je důležité znát své zákazníky.</span><span class="sxs-lookup"><span data-stu-id="04302-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="04302-220">Například důležité je porozumění faktorům, které vytváří dobré zákazníky.</span><span class="sxs-lookup"><span data-stu-id="04302-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="04302-221">Pomáhá vedení hotelu posoudit, na které funkce se musí zaměřit a zlepšit je, aby byli spokojeni jejich draze platící zákazníci.</span><span class="sxs-lookup"><span data-stu-id="04302-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="04302-222">Tato rozhodnutí mohou mít přímý dopad na prodej a výdělky.</span><span class="sxs-lookup"><span data-stu-id="04302-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="04302-223">Definice CLTV</span><span class="sxs-lookup"><span data-stu-id="04302-223">Definition of CLTV</span></span>

<span data-ttu-id="04302-224">V tomto příkladu definujeme CLTV zákazníka jako celkovou částku v dolarech, kterou má zákazník v následujících 365 dnech utratit.</span><span class="sxs-lookup"><span data-stu-id="04302-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="04302-225">K predikci této hodnoty využijeme data všech zákazníků za poslední tři roky.</span><span class="sxs-lookup"><span data-stu-id="04302-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="04302-226">Vytváření funkcí</span><span class="sxs-lookup"><span data-stu-id="04302-226">Featurization</span></span>

<span data-ttu-id="04302-227">V tomto případě bude vytváření funkcí velmi podobné scénáři úbytku.</span><span class="sxs-lookup"><span data-stu-id="04302-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="04302-228">Popisky a předpovídané hodnoty se však liší od výše uvedených.</span><span class="sxs-lookup"><span data-stu-id="04302-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="04302-229">Výběr modelu</span><span class="sxs-lookup"><span data-stu-id="04302-229">Model selection</span></span>

<span data-ttu-id="04302-230">Predikce CLTV je regresní problém, protože predikovaná hodnota je kladná oceňovaná spojitá proměnná.</span><span class="sxs-lookup"><span data-stu-id="04302-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="04302-231">Na základě vlastností objektu vybereme **Posílená regrese rozhodovacího stromu** jako jeden algoritmus a **Regrese neuronové sítě** jako další algoritmus pro trénování modelu.</span><span class="sxs-lookup"><span data-stu-id="04302-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="04302-232">Doporučení produktu nebo další nejlepší akce</span><span class="sxs-lookup"><span data-stu-id="04302-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="04302-233">Doporučení produktu v hotelovém scénáři se interpretuje jako doporučení služeb, které hotel nabízí zákazníkům.</span><span class="sxs-lookup"><span data-stu-id="04302-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="04302-234">Cílem je vybrat vhodné služby pro zákazníky tak, aby jejich využití bylo maximalizováno.</span><span class="sxs-lookup"><span data-stu-id="04302-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="04302-235">Je to podobné jako doporučení filmů pro uživatele služeb streamování videa.</span><span class="sxs-lookup"><span data-stu-id="04302-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="04302-236">Defnice doporučení produktu nebo další nejlepší akce</span><span class="sxs-lookup"><span data-stu-id="04302-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="04302-237">Tento cíl definujeme jako maximalizaci dolarové částky za využití služeb tím, že hotelovým zákazníkům nabízíme ty nejlepší služby podle jejich zájmu.</span><span class="sxs-lookup"><span data-stu-id="04302-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="04302-238">Vytváření funkcí</span><span class="sxs-lookup"><span data-stu-id="04302-238">Featurization</span></span>

<span data-ttu-id="04302-239">Stejně jako u modelu úbytku se připojíme k ID zákazníka služby (ServiceCustomerID) hotelu pomocí ID zákazníka (CustomerID), abychom mohli vytvářet doporučení konzistentně podle ID zákazníka.</span><span class="sxs-lookup"><span data-stu-id="04302-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Vytváření funkcí pro model doporučení](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="04302-241">Data jsou získána ze tří různých entit a funkce jsou z nich odvozeny.</span><span class="sxs-lookup"><span data-stu-id="04302-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="04302-242">Vytváření funkcí pro problém doporučení se liší ve srovnání se scénáři úbytku nebo CLTV.</span><span class="sxs-lookup"><span data-stu-id="04302-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="04302-243">Model doporučení vyžaduje vstupní data ve formě tří sad funkcí.</span><span class="sxs-lookup"><span data-stu-id="04302-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="04302-244">Výběr modelu</span><span class="sxs-lookup"><span data-stu-id="04302-244">Model selection</span></span>

<span data-ttu-id="04302-245">Predikujeme produkty nebo služby pomocí algoritmu **Trénování nástroje pro doporučení shody** pro trénování modelu doporučení.</span><span class="sxs-lookup"><span data-stu-id="04302-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Algoritmus doporučení produktů](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="04302-247">Tři vstupní porty pro model **Trénování nástroje pro doporučení shody** vezmou data o využití služeb cvičení, popis zákazníka (volitelné) a popis služby.</span><span class="sxs-lookup"><span data-stu-id="04302-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="04302-248">Existují tři různé způsoby bodování modelu.</span><span class="sxs-lookup"><span data-stu-id="04302-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="04302-249">Jedním z nich je hodnocení modelu, kde se skóre Normalizovaný srážkový kumulativní přírůstek (NDCG) vypočítá pro zařazení hodnocených položek.</span><span class="sxs-lookup"><span data-stu-id="04302-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="04302-250">V tomto experimentu máme skóre NDCG 0,97.</span><span class="sxs-lookup"><span data-stu-id="04302-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="04302-251">Další dvě možnosti jsou bodování modelu v celém katalogu doporučitelných služeb nebo bodování pouze u položek, které uživatelé dosud nepoužili.</span><span class="sxs-lookup"><span data-stu-id="04302-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="04302-252">Pokud se podíváme dále na distribuci doporučení v celém katalogu služeb, všimneme si, že nejlepší služby pro doporučení jsou telefon, WiFi a kurýr.</span><span class="sxs-lookup"><span data-stu-id="04302-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="04302-253">To je v souladu s tím, co jsme zjistili z distribucí údajů o spotřebě služby:</span><span class="sxs-lookup"><span data-stu-id="04302-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Výstup modelu doporučení](media/azure-machine-learning-model-output.png)

<span data-ttu-id="04302-255">Celý [experiment s doporučením produktu je přístupný v Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="04302-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="04302-256">Integrace vlastních modelů</span><span class="sxs-lookup"><span data-stu-id="04302-256">Integrate custom models</span></span>

<span data-ttu-id="04302-257">Chcete-li tyto predikce použít v Customer Insights, musíte **exportovat** predikce spolu s ID zákazníků.</span><span class="sxs-lookup"><span data-stu-id="04302-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="04302-258">[Exportujte je do stejného umístění úložiště Azure Blob](/azure/storage/common/storage-import-export-data-from-blobs), do kterého exportujete zdrojová data.</span><span class="sxs-lookup"><span data-stu-id="04302-258">[Export them to the same Azure Blob storage location](/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="04302-259">Prediktivní webová služba může být naplánována tak, aby pracovala pravidelně a aktualizovala bodování.</span><span class="sxs-lookup"><span data-stu-id="04302-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="04302-260">Data generovaná vlastním modelem lze použít k dalšímu rozšíření vašich zákaznických dat.</span><span class="sxs-lookup"><span data-stu-id="04302-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="04302-261">Další informace viz [Vlastní modely strojového učení](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="04302-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]